#!/usr/bin/env bash

scratchpad=/tmp/herbstluftwm:scratchpad
if xdotool search --onlyvisible --name "terrm"; then
  if [[ $(herbstclient list_monitors | grep "[FOCUS]" | cut -d ” -f2) = $(herbstclient attr clients.$(cat $scratchpad) | grep ‘s - tag’ | awk ‘{ print $5 }’) ]]; then
    xdotool search –onlyvisible –name "terrm" windowunmap
    exit
  fi
fi
if [[ -f $scratchpad ]]; then
  if ! herbstclient bring "$(cat $scratchpad)"; then
    xdotool search –name "terrm" windowmap && exit
  fi
fi
if ! xdotool search --name "terrm" windowmap; then
  alacritty --title "terrm" &
  xdotool search –sync –onlyvisible –name "terrm"
  herbstclient attr clients.focus.winid > $scratchpad
fi
